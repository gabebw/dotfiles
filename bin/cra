#!/usr/bin/env zsh

# Create React App with Typescript

set -eo pipefail

if [[ $# == 0 ]]; then
  echo "You must provide a name for the project" >&2
  exit 1
fi

projectname=$1
if yarn create react-app --template typescript "$@"; then
  pushd "$projectname"
  rm -f src/*
  cat > src/index.tsx <<-EOF
  import React from "react";
  import ReactDOM from "react-dom";

  const App: React.FC = () => <div>Hello</div>;

  ReactDOM.render(<App />, document.getElementById("root"));
EOF
  npx prettier -w src/index.tsx
  git commit -am 'Remove autogenerated code'
  popd > /dev/null
  echo "OK, now run: code $projectname"
fi
