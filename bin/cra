#!/usr/bin/env zsh

set -eo pipefail

# Create React App with Typescript

# Turn off Zsh prompt:
# zsh: sure you want to delete all 8 files in DIR [yn]?
setopt rm_star_silent

projectname=$1
if yarn create react-app --template typescript "$@"; then
  pushd "$projectname"
  # Save old value
  rm -f src/*
  touch src/index.tsx
  echo "import React from 'react';" > src/index.tsx
  echo "import ReactDOM from 'react-dom';" >> src/index.tsx
  git commit -am 'Remove autogenerated code'
  popd
  echo "OK, now run: code $projectname"
fi
